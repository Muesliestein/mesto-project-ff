(()=>{"use strict";var e=document.querySelector("#card").content;function t(e){e.target.closest(".card").remove()}function n(e){e.target.classList.toggle("card__like_active")}function o(o,r){var s=e.cloneNode(!0),c=s.querySelector(".card__image");return s.querySelector(".card__name").textContent=o.name,c.alt=o.name,c.src=o.link,s.getElementById("card_delete").addEventListener("click",t),s.querySelector(".card__like").addEventListener("click",n),s.querySelector(".card__image").addEventListener("click",(function(){return r(o)})),s}function r(e){e.classList.add("popup_opened"),document.addEventListener("keydown",c),document.addEventListener("click",c)}function s(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",c),document.removeEventListener("click",c)}function c(e){("Escape"===e.key||e.target.classList.contains("popup_opened"))&&s(document.querySelector(".popup_opened"))}var a,l=function(e,t,n,o){var r=e.querySelector("#".concat(t.id,"-error"));return t.validity.valid?function(e,t,n){return console.log(e.classList.contains(n.inputErrorClass)),console.log(t.classList.contains(n.errorClass)),console.log(n),e.classList.contains(n.inputErrorClass)&&t.classList.contains(n.errorClass)}(t,r,o)?(function(e,t,n){e&&(t.classList.remove(n.inputErrorClass),e.classList.remove(n.errorClass),e.textContent="")}(r,t,o),n.removeAttribute("disabled",!0),console.log("VALID"),!0):(console.log("CLEAR"),n.setAttribute("disabled",!0),!0):(function(e,t,n,o){console.log(e),e&&n&&(t.classList.add(o.inputErrorClass),e.textContent=n,e.classList.add(o.errorClass))}(r,t,t.validationMessage,o),n.classList.add(o.inactiveButtonClass),n.setAttribute("disabled",!0),console.log("ERROR"),!1)};a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error"},Array.from(document.querySelectorAll(a.formSelector)).forEach((function(e){console.log("button",e),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach((function(r){r.addEventListener("input",(function(){l(e,r,o,t)&&function(e){var t=!0;return e.forEach((function(e){""===e.value&&e.hasAttribute("required")&&(t=!1)})),t}(n)&&(o.classList.remove(t.inactiveButtonClass),o.removeAttribute("disabled"))}))}))}(e,a)}));var i=document.querySelector(".elements__list"),d=document.querySelector(".popup__image"),u=document.querySelector(".popup__description"),p=document.getElementById("popup-image"),m=document.getElementById("popup-profile"),v=document.getElementById("popup-card"),f=document.getElementById("form_profile"),_=document.getElementById("form_card"),y=document.querySelector(".profile__edit"),g=document.querySelector(".profile__button"),E=document.getElementById("buttonSave"),k=document.getElementById("title"),L=document.getElementById("description"),S=document.getElementById("name"),b=document.getElementById("link"),C=document.querySelector(".profile__title"),q=document.querySelector(".profile__subtitle");g.addEventListener("click",(function(){_.reset(),E.setAttribute("disabled",!0),E.classList.add("popup__save_disabled"),r(v)})),y.addEventListener("click",(function(){r(m),k.value=C.textContent,L.value=q.textContent})),_.addEventListener("submit",(function(e){e.preventDefault();var t,n=e.target,r=o({name:S.value,link:b.value},h);t=r,i.prepend(t),s(v),n.reset()})),f.addEventListener("submit",(function(e){e.preventDefault(),C.textContent=k.value,q.textContent=L.value,s(m)}));function h(e){r(p),u.textContent=e.name,d.src=e.link,d.alt=e.name}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){(function(e){i.append(e)})(o(e,h))})),document.querySelectorAll(".popup__close").forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return s(t)}))}))})();